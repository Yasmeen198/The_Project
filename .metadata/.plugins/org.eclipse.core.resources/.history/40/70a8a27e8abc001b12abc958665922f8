package com.shopify.dao;

import java.util.ArrayList;
import java.util.List;

import org.hibernate.Session;
import org.hibernate.SessionFactory;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Repository;
import org.springframework.transaction.annotation.Transactional;

import com.shopify.model.CartItem;
import com.shopify.model.Product;

	@Repository("cartItemDAO")
	@Transactional
	public class CartItemDaoImpl implements CartItemDao{

		@Autowired
		private SessionFactory sessionFactory;
		
		

		@Override
		public CartItem getCartItemByProductId(int productId) {
			CartItem item;
			try
			{
				Session session = sessionFactory.getCurrentSession();
				item = session.get(CartItem.class,productId);
				return item;
			}
			catch(Exception ex)
			{
				ex.printStackTrace();
				return null;
			}
		}

		@Override
		public boolean addProduct(Product product) {
			try
			{
				Session session = sessionFactory.getCurrentSession();
				session.save(product);
				session.flush();
				return true;
			}
			catch(Exception ex)
			{
				ex.printStackTrace();
				return false;
			}
		}

		@Override
		public boolean updateProduct(Product product) {
			
			try
			{
				Session session = sessionFactory.getCurrentSession();
				session.saveOrUpdate(product);
				session.flush();
				return true;
	}
			catch(Exception ex)
			{
				ex.printStackTrace();
				return false;
	}
		}

		@Override
		public boolean deleteProduct(Product product) {
		
			try
			{
				Session session = sessionFactory.getCurrentSession();
				session.delete(product);
				session.flush();
				return true;
			}
			catch(Exception ex)
			{
				ex.printStackTrace();
				return false;
				
			}
		}

	}

}
